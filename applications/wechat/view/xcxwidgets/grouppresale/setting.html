<!-- ############### 编辑区域 ############### -->
<!-- 图文混合 -->
<template id="widget-child-setting-grouppresale">
    <div class="view-item-setting image-text-block" :id="widget.name + '_setting_' + index">
        <div class="panel panel-primary">
            <div class="panel-heading">
                {{widget.title}}
                <a type="button" class="icon icon-close pull-right" href="javascript:;" @click="closeEv"></a>
            </div>
            <div class="panel-body form-horizontal">
                <div class="tab-content">
                    <div class="tab-pane" :class="{'active': (active_tab == 'style')}" :id="widget.name + '_style_' + index">
                        <div class="form-group form-group-sm title-block">
                            <label class="col-sm-2 control-label control-title">模板选择</label>
                        </div>
                        <div class="form-group form-group-sm">
                            <div class="col-sm-offset-1 col-sm-11">
                                <label class="col-sm-2 control-label">模版样式</label>
                                <div class="col-sm-8">
                                    <div style="padding-left: 5px;">
                                        <label for="groupBuy" class="radio-inline">
                                            <input type="radio" id="groupBuy" value="group_id" name="filter_type" v-model="widget.data.filter_type" @change="changeType">团购入口
                                        </label>
                                        <label for="presaleBuy" class="radio-inline">
                                            <input type="radio" id="presaleBuy" value="presale_id"  name="filter_type" v-model="widget.data.filter_type"  @change="changeType">预售入口
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group form-group-sm title-block">
                            <label class="col-sm-2 control-label control-title">内容设置</label>
                        </div>
                        <div class="form-group form-group-sm">
                            <div class="col-sm-offset-1 col-sm-11">
                                <label class="col-sm-2 control-label">展示方式</label>
                                <div class="col-sm-8">
                                    <div style="padding-left: 5px;">
                                        <label for="displayNormal" class="radio-inline">
                                            <input type="radio" id="displayNormal" name="display_type" value="normal" v-model="widget.data.display_type">通栏展示
                                        </label>
                                        <label for="displayCard" class="radio-inline">
                                            <input type="radio" id="displayCard" name="display_type" value="card" v-model="widget.data.display_type">卡片展示
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group form-group-sm title-block">
                            <label class="col-sm-2 control-label control-title">内容编辑</label>
                        </div>
                        <div class="form-group form-group-sm">
                        	<div class="col-sm-3 control-label">
                                <div class="outer">
                                    <div class="upload-img-btn-box">
                                        <img :src="widget.data.imgSrc?widget.data.imgSrc:'data:image/png;base64,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'">
                                        <input type="file" accept="image/gif,image/jpeg,image/jpg,image/png" class="form-control hidden" @change="onCreateFileChange" />
                                        <div class="btn btn-primary btn-sm btn-block" @click="selectCreateUpImg"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-9">
                                <!--<design-setting-link :widget="widget" :index="index" :name="'create'" :ref="widget.name + '_link_create_' + index"></design-setting-link>-->
                                
                                <div class="form-group form-group-sm">
                                    <label :for="'cols_' + index" class="col-sm-3 control-label">团购标题</label>
                                    <div class="col-sm-9">
                                        <input class="form-control" type="text" v-model="widget.data.title" placeholder="请输入标题">
                                    </div>
                                </div>
                                <div v-if="widget.data.filter_type=='group_id'">
		                            <design-group-selector :widget="widget" :index="index" :group_id="widget.data.filter.group_id"></design-group-selector>
		                        </div>
		                        <div v-if="widget.data.filter_type=='presale_id'">
		                            <design-presale-selector :widget="widget" :index="index" :presale_id="widget.data.filter.presale_id"></design-presale-selector>
		                        </div>
		                        <div class="text-right">
		                            <button type="button" class="btn btn-success btn-xs" @click="onGroupUpdate">刷新列表</button>
		                        </div>
                            </div>
                        </div>
                        <div class="form-group form-group-sm title-block">
                            <label class="col-sm-2 control-label control-title">按钮编辑</label>
                        </div>
                        <div class="form-group form-group-sm">
		                    <label :for="widget.name + '_line_color_' + index" class="col-sm-3 control-label">按钮背景</label>
		                    <div class="col-sm-8">
		                        <input type="color" class="form-control" :id="widget.name + '_line_color_' + index" placeholder="线条颜色" v-model="widget.data.bgColor" :value="widget.data.line_color">
		                    </div>
		                </div>
                    </div>
                </div>
            </div>
            <div class="panel-footer text-right">
                <button type="button" class="btn btn-primary btn-xs" @click="closeEv">关闭</button>
            </div>
        </div>
    </div>
</template>
<script type="text/javascript">
// --------------------------- 团购预售

// 编辑项目
designStore.methods.grouppresaleItemEditEv = function(vnode, item_index, item) {
    return this.childItemEditEv(vnode, item_index, item);
};
// 新增项目
designStore.methods.grouppresaleAddEv = function(vnode, item) {
    return this.itemAddEv(vnode, item);
};

var widget_child_setting_grouppresale = Vue.extend({
    props: ['widget', 'index'],
    data: function() {
        return {
            active_tab: 'style',
            edit_item: false
        };
    },
    template: '#widget-child-setting-grouppresale',
    methods: {
        changeType:function(){
        	this.onGroupUpdate();
        },
        // 关闭
        closeEv: function() {
            //this.grouppresaleItemCancelEv();
            return designStore.methods.closeEv(this);
        },
        onGroupUpdate: function() {
            return designStore.methods.onGroupUpdate(this);
        },
        groupChange: function(group_id) {
            designStore.methods.setFilterGroupId(this, group_id);
        },
        removeGroup: function(group_key) {
            designStore.methods.removeFilterGroupId(this, group_key);
        },
        // 
        presaleChange: function(presale_id) {
            designStore.methods.setFilterPresaleId(this, presale_id);
        },
        removePresale: function(presale_key) {
            designStore.methods.removeFilterPresaleId(this, presale_key);
        },
        selectCreateUpImg: function(e) {
            designStore.methods.selectUpImg(e);
        },
        // 上传
        onCreateFileChange: function(e) {
            designStore.methods.onFileChange(e, this.onCreateUploadImg);
        },
        // 删除
        removeCreateUpimg: function() {
            var _t = this;
            designStore.methods.removeCreateUpimg(function() {
                _t.widget.data.imgSrc = null;
            });
        },
        // 上传完成
        onCreateUploadImg: function(imgUrl) {
            if (!imgUrl) return;
            this.widget.data.imgSrc = imgUrl;
        },
    },
    created: function() {
       // this.canCreate();
    },
});
</script>
<style>
    .image-text-block .title-block{
        border-top: 1px solid #ccc;
    }
    .image-text-block .control-title{
        font-size: 18px;
        font-weight: 700;
    }
    .image-text-block .list-item{
        margin-right: 15px !important;
        margin-bottom: 8px !important;
    }
    .image-text-block .template-label{
        width: 200px;
        background-color: #F2F2F2;
        text-align: left;
        position: relative;
        cursor: pointer;
        margin-bottom: 0 !important;
    }
    .image-text-block .template-label input{
        opacity: 0;
        display: none;
    }
    .image-text-block .template-label img{
        width: 110px;
        height: 80px;
    }
    .image-text-block .column-img{
        width: 100% !important;
        height: 80px !important;
    }
    .image-text-block .small-img{
        width: 55px !important;
        height: 40px !important;
    }
    .image-text-block .check-icon{
        position: absolute;
        right: 5px;
        bottom: 5px;
        font-size:20px;
    }
    .image-text-block .radio-inline input[type=checkbox] {
        position: absolute;
        margin-top: 4px;
        margin-left: -20px;
    }
    .image-text-block .outer{
        margin-left: 10%;
    }
    .image-text-block .upload-img-btn-box{
        position: relative;
        width: 100px;
        height: 100px;
        line-height: 100px;
        text-align: center;
        margin-right: 0 !important;
    }
    .image-text-block .upload-img-btn-box img{
        max-width: 100%;
        max-height: 100%;
        vertical-align: middle;
    }
    .image-text-block .upload-img-btn-box .btn-block{
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: transparent !important;
    }
    .image-text-block .text-left{
        text-align: left;
        margin-top: 10px;
    }
</style>